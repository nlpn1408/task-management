{
  "version": 3,
  "sources": ["../../../../src/triggers/defineAuthChallenge.ts"],
  "sourcesContent": ["export const handler = async (event: any) => {\r\n  const session = event.request.session || [];\r\n\r\n  if (session.length === 0) {\r\n    // L\u1EA7n \u0111\u1EA7u, y\u00EAu c\u1EA7u OTP\r\n    event.response.issueTokens = false;\r\n    event.response.failAuthentication = false;\r\n    event.response.challengeName = \"CUSTOM_CHALLENGE\";\r\n  } else {\r\n    const lastChallenge = session[session.length - 1];\r\n    if (\r\n      lastChallenge.challengeName === \"CUSTOM_CHALLENGE\" &&\r\n      lastChallenge.challengeResult === true\r\n    ) {\r\n      // OTP th\u00E0nh c\u00F4ng, c\u1EA5p token\r\n      event.response.issueTokens = true;\r\n      event.response.failAuthentication = false;\r\n    } else if (\r\n      lastChallenge.challengeName === \"CUSTOM_CHALLENGE\" &&\r\n      lastChallenge.challengeResult === false\r\n    ) {\r\n      // OTP sai, th\u1EED l\u1EA1i\r\n      event.response.issueTokens = false;\r\n      event.response.failAuthentication = false;\r\n      event.response.challengeName = \"CUSTOM_CHALLENGE\";\r\n    } else {\r\n      // Th\u1EA5t b\u1EA1i kh\u00E1c, fail auth\r\n      event.response.issueTokens = false;\r\n      event.response.failAuthentication = true;\r\n    }\r\n  }\r\n\r\n  return event;\r\n};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,IAAM,UAAU,OAAO,UAAe;AAC3C,QAAM,UAAU,MAAM,QAAQ,WAAW,CAAC;AAE1C,MAAI,QAAQ,WAAW,GAAG;AAExB,UAAM,SAAS,cAAc;AAC7B,UAAM,SAAS,qBAAqB;AACpC,UAAM,SAAS,gBAAgB;AAAA,EACjC,OAAO;AACL,UAAM,gBAAgB,QAAQ,QAAQ,SAAS,CAAC;AAChD,QACE,cAAc,kBAAkB,sBAChC,cAAc,oBAAoB,MAClC;AAEA,YAAM,SAAS,cAAc;AAC7B,YAAM,SAAS,qBAAqB;AAAA,IACtC,WACE,cAAc,kBAAkB,sBAChC,cAAc,oBAAoB,OAClC;AAEA,YAAM,SAAS,cAAc;AAC7B,YAAM,SAAS,qBAAqB;AACpC,YAAM,SAAS,gBAAgB;AAAA,IACjC,OAAO;AAEL,YAAM,SAAS,cAAc;AAC7B,YAAM,SAAS,qBAAqB;AAAA,IACtC;AAAA,EACF;AAEA,SAAO;AACT;",
  "names": []
}
